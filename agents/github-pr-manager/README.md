# GitHub PR Manager Agent System\n\nA comprehensive multi-agent system for automating GitHub PR and Issue management with intelligent task delegation and coordination.\n\n## Features\n\n### ðŸ¤– **Automated PR Management**\n- **Intelligent Analysis**: Automatically analyzes PRs for complexity, risk, and required reviews\n- **Multi-Agent Coordination**: Delegates tasks to specialized agents for different review types\n- **Real-time Reporting**: Posts comprehensive reports and updates directly to GitHub\n- **Command Interface**: Supports slash commands for manual triggers and status checks\n\n### ðŸ“‹ **Issue Management & Triage**\n- **Auto-Triage**: Automatically categorizes, prioritizes, and estimates effort for new issues\n- **Duplicate Detection**: Identifies potential duplicate issues using similarity analysis\n- **Code Generation**: Can automatically generate code for simple, well-defined issues\n- **Template System**: Uses customizable templates for different issue types\n\n### ðŸ”§ **Specialized Agents**\n- **Security Agent**: Vulnerability scanning, security best practices, threat analysis\n- **Code Review Agent**: Code quality, maintainability, complexity analysis\n- **Testing Agent**: Test coverage analysis, test generation, CI/CD integration\n- **Documentation Agent**: Documentation completeness, API docs, README updates\n- **Performance Agent**: Performance impact analysis, optimization suggestions\n- **Deployment Agent**: Deployment readiness, migration safety, infrastructure checks\n\n### ðŸ“Š **Advanced Features**\n- **Load Balancing**: Distributes tasks across available agents based on capacity\n- **Health Monitoring**: Tracks agent health and performance metrics\n- **Retry Logic**: Intelligent retry mechanisms for failed tasks\n- **Priority Queue**: Executes tasks based on priority levels (critical, high, medium, low)\n- **Webhook Integration**: Full GitHub webhook support for real-time event processing\n\n## Installation\n\n### Prerequisites\n- Node.js 18+ \n- TypeScript\n- GitHub App credentials\n- Agent endpoints (or use included mock agents)\n\n### Setup\n\n1. **Clone and Install**\n   ```bash\n   git clone <repository>\n   cd agents/github-pr-manager\n   npm install\n   ```\n\n2. **Environment Configuration**\n   ```bash\n   cp .env.example .env\n   # Edit .env with your configuration\n   ```\n\n3. **Required Environment Variables**\n   ```env\n   # GitHub App Configuration\n   GITHUB_APP_ID=123456\n   GITHUB_PRIVATE_KEY=\"-----BEGIN PRIVATE KEY-----\\n...\"\n   GITHUB_INSTALLATION_ID=78901234\n   GITHUB_WEBHOOK_SECRET=your_webhook_secret\n   \n   # Agent Configuration\n   MAX_CONCURRENT_TASKS=10\n   TASK_TIMEOUT=300000\n   RETRY_ATTEMPTS=3\n   \n   # Agent Endpoints\n   SECURITY_AGENT_ENDPOINT=http://localhost:3001\n   CODE_REVIEW_AGENT_ENDPOINT=http://localhost:3002\n   TESTING_AGENT_ENDPOINT=http://localhost:3003\n   DOCUMENTATION_AGENT_ENDPOINT=http://localhost:3004\n   PERFORMANCE_AGENT_ENDPOINT=http://localhost:3005\n   DEPLOYMENT_AGENT_ENDPOINT=http://localhost:3006\n   \n   # Database\n   DATABASE_URL=sqlite://./github_agent.db\n   \n   # Monitoring\n   MONITORING_ENABLED=true\n   MONITORING_ENDPOINT=http://prometheus:9090\n   \n   # Server\n   PORT=3000\n   NODE_ENV=production\n   ```\n\n4. **Start the Server**\n   ```bash\n   npm start\n   # or for development\n   npm run dev\n   ```\n\n## Usage\n\n### GitHub Webhook Setup\n\n1. **Create a GitHub App**\n   - Go to GitHub Settings > Developer settings > GitHub Apps\n   - Create new GitHub App with these permissions:\n     - Issues: Read & Write\n     - Pull requests: Read & Write\n     - Contents: Read\n     - Metadata: Read\n     - Checks: Write\n   \n2. **Configure Webhook**\n   - Webhook URL: `https://your-domain.com/webhook`\n   - Content type: `application/json`\n   - Secret: Your webhook secret\n   - Events: Issues, Pull requests, Pull request reviews, Issue comments\n\n### Supported Commands\n\n#### PR Commands (in PR comments)\n```bash\n/rerun-tests          # Re-run test analysis\n/security-review      # Trigger security review\n/performance-check    # Run performance analysis\n/full-review         # Run complete review suite\n/status              # Get current processing status\n/create-issue <type> # Create follow-up issue\n```\n\n#### Issue Commands (in issue comments)\n```bash\n/triage              # Re-triage the issue\n/estimate            # Show effort estimate\n/assign-agent <type> # Assign specific agent type\n/generate-code       # Auto-generate code (if possible)\n/generate-docs       # Generate documentation\n/link-pr <number>    # Link to related PR\n/duplicate <number>  # Mark as duplicate\n/status              # Get issue status\n```\n\n### API Endpoints\n\n- `GET /health` - Health check\n- `GET /status` - System status and metrics\n- `GET /metrics` - Prometheus metrics\n- `POST /webhook` - GitHub webhook receiver\n- `POST /trigger/pr-review` - Manual PR review trigger\n- `POST /trigger/issue-triage` - Manual issue triage trigger\n\n## Architecture\n\n### Core Components\n\n1. **GitHubPRManagerAgent** - Main orchestrator\n2. **PRAnalyzer** - Analyzes PR content and requirements\n3. **GitHubIssueManager** - Handles issue triage and management\n4. **AgentOrchestrator** - Manages agent lifecycle and task distribution\n5. **TaskDelegator** - Handles task delegation with priority and retry logic\n6. **GitHubReporter** - Manages all GitHub API interactions and reporting\n\n### Agent Communication\n\nAgents communicate via HTTP APIs with standardized request/response formats:\n\n```typescript\n// Task Request\n{\n  task: {\n    id: string,\n    type: TaskType,\n    payload: any,\n    timeout: number\n  },\n  context: {\n    timeout: number,\n    retries: number\n  }\n}\n\n// Agent Response\n{\n  taskId: string,\n  status: 'completed' | 'failed',\n  result?: any,\n  error?: { message: string, code: string },\n  metadata: {\n    executionTime: number,\n    agentVersion: string,\n    agentId: string\n  }\n}\n```\n\n### Task Types\n\n- `security_review` - Security vulnerability analysis\n- `code_review` - Code quality and maintainability\n- `testing` - Test coverage and quality\n- `documentation` - Documentation completeness\n- `performance_review` - Performance impact analysis\n- `deployment_check` - Deployment readiness\n- `code_generation` - Automated code generation\n\n## Example Workflows\n\n### PR Review Workflow\n\n1. **PR Opened** â†’ Webhook received\n2. **Analysis** â†’ PR content analyzed for complexity and requirements\n3. **Task Generation** â†’ Appropriate review tasks created based on analysis\n4. **Agent Delegation** â†’ Tasks distributed to specialized agents\n5. **Parallel Execution** â†’ Agents work on tasks concurrently\n6. **Result Aggregation** â†’ Results collected and processed\n7. **Reporting** â†’ Comprehensive report posted to PR\n8. **Status Update** â†’ GitHub check status updated\n\n### Issue Triage Workflow\n\n1. **Issue Opened** â†’ Webhook received\n2. **Analysis** â†’ Issue content analyzed for type, priority, complexity\n3. **Auto-Triage** â†’ Labels, estimates, and assignments applied\n4. **Duplicate Check** â†’ Similar issues identified\n5. **Template Application** â†’ Appropriate response templates used\n6. **Agent Assignment** â†’ Suitable agents identified for resolution\n7. **Progress Tracking** â†’ Issue status tracked through resolution\n\n## Monitoring & Metrics\n\n### Health Checks\n- Agent availability and response times\n- System resource usage\n- Task success/failure rates\n- Queue lengths and processing times\n\n### Prometheus Metrics\n```\ngithub_agent_active_prs          # Active PRs being processed\ngithub_agent_active_issues       # Active issues being managed\ngithub_agent_active_tasks        # Currently running tasks\ngithub_agent_success_rate        # Overall task success rate\ngithub_agent_average_task_time   # Average task execution time\ngithub_agent_queue_length        # Current task queue length\n```\n\n## Development\n\n### Running in Development\n```bash\nnpm run dev          # Start with hot reload\nnpm run test         # Run test suite\nnpm run lint         # Code linting\nnpm run type-check   # TypeScript type checking\n```\n\n### Creating Custom Agents\n\nAgents must implement the standard HTTP interface:\n\n```typescript\n// POST /execute\n{\n  task: AgentTask,\n  context: TaskExecutionContext\n}\n\n// Response\n{\n  taskId: string,\n  status: TaskStatus,\n  result?: any,\n  error?: { message: string },\n  metadata: {\n    executionTime: number,\n    agentId: string,\n    agentVersion: string\n  }\n}\n\n// GET /health\n{\n  status: 'healthy' | 'degraded' | 'unhealthy',\n  activeTaskCount: number,\n  queueLength: number,\n  averageResponseTime: number,\n  uptime: number\n}\n\n// POST /command (pause, cancel, etc.)\n{\n  command: string,\n  payload: any\n}\n```\n\n## Deployment\n\n### Docker Deployment\n```bash\ndocker build -t github-pr-manager .\ndocker run -p 3000:3000 --env-file .env github-pr-manager\n```\n\n### Kubernetes Deployment\nSee `k8s/` directory for Kubernetes manifests.\n\n### Production Considerations\n- Use a proper database (PostgreSQL recommended)\n- Set up SSL/TLS termination\n- Configure monitoring and alerting\n- Scale agents based on load\n- Implement proper logging and error tracking\n\n## Security\n\n- Webhook signature verification\n- GitHub App authentication\n- No sensitive data in logs\n- Agent communication over HTTPS\n- Rate limiting and request validation\n\n## Contributing\n\n1. Fork the repository\n2. Create a feature branch\n3. Add tests for new functionality\n4. Ensure all tests pass\n5. Submit a pull request\n\n## License\n\nMIT License - see LICENSE file for details."