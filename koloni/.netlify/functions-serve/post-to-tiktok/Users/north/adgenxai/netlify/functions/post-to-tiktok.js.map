{
  "version": 3,
  "sources": ["../../../../adgenxai/netlify/functions/post-to-tiktok.ts", "../../../../adgenxai/lib/platforms/tiktok.ts"],
  "sourceRoot": "C:/Users/north/AppData/Local/Temp/tmp-28196-kUWYXTdQ4ZCO",
  "sourcesContent": ["// netlify/functions/post-to-tiktok.ts\n// Netlify function to publish videos to TikTok (stub - requires implementation)\n\nimport { Handler, HandlerEvent, HandlerContext } from \"@netlify/functions\";\nimport { publishVideo } from \"../../lib/platforms/tiktok\";\n\ninterface PostRequest {\n  videoUrl: string;\n  title: string;\n}\n\nexport const handler: Handler = async (\n  event: HandlerEvent,\n  context: HandlerContext\n) => {\n  // Only allow POST requests\n  if (event.httpMethod !== \"POST\") {\n    return {\n      statusCode: 405,\n      body: JSON.stringify({ error: \"Method not allowed. Use POST.\" }),\n    };\n  }\n\n  try {\n    // Parse request body\n    const body: PostRequest = JSON.parse(event.body || \"{}\");\n    const { videoUrl, title } = body;\n\n    // Validate inputs\n    if (!videoUrl || !title) {\n      return {\n        statusCode: 400,\n        body: JSON.stringify({\n          error: \"Missing required fields: videoUrl and title\",\n        }),\n      };\n    }\n\n    // Get TikTok credentials from environment variables\n    const clientKey = process.env.TIKTOK_CLIENT_KEY;\n    const clientSecret = process.env.TIKTOK_CLIENT_SECRET;\n    const accessToken = process.env.TIKTOK_ACCESS_TOKEN;\n    const openId = process.env.TIKTOK_OPEN_ID;\n\n    if (!clientKey || !clientSecret || !accessToken) {\n      return {\n        statusCode: 500,\n        body: JSON.stringify({\n          error: \"TikTok credentials not configured. Set TIKTOK_CLIENT_KEY, TIKTOK_CLIENT_SECRET, and TIKTOK_ACCESS_TOKEN environment variables.\",\n        }),\n      };\n    }\n\n    // Note: TikTok publishing is not yet implemented\n    // This will throw an error from the platform module\n    const result = await publishVideo(\n      { clientKey, clientSecret, accessToken, openId },\n      videoUrl,\n      title\n    );\n\n    return {\n      statusCode: 200,\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        success: true,\n        platform: \"tiktok\",\n        shareId: result.shareId,\n        message: \"Successfully published to TikTok\",\n      }),\n    };\n  } catch (error: any) {\n    console.error(\"TikTok posting error:\", error);\n\n    // Check if it's the \"not implemented\" error\n    if (error.message.includes(\"not implemented\")) {\n      return {\n        statusCode: 501,\n        body: JSON.stringify({\n          error: \"TikTok publishing not yet implemented\",\n          details: \"The TikTok Content Posting API integration needs to be completed. See lib/platforms/tiktok.ts\",\n        }),\n      };\n    }\n\n    return {\n      statusCode: 500,\n      body: JSON.stringify({\n        error: \"Failed to post to TikTok\",\n        details: error.message,\n      }),\n    };\n  }\n};\n", "// lib/platforms/tiktok.ts\n// TikTok Content Posting API stub\n\nexport type TikTokConfig = {\n  clientKey: string;\n  clientSecret: string;\n  accessToken: string;\n  openId?: string;\n};\n\nexport async function publishVideo(\n  config: TikTokConfig,\n  videoUrl: string,\n  title: string\n): Promise<{ shareId: string }> {\n  throw new Error(\"TikTok publishing not implemented. Add TikTok Content Posting API flow.\");\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACUA,eAAsB,aACpB,QACA,UACA,OAC8B;AAC9B,QAAM,IAAI,MAAM,yEAAyE;AAC3F;;;ADLO,IAAM,UAAmB,OAC9B,OACA,YACG;AAEH,MAAI,MAAM,eAAe,QAAQ;AAC/B,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,MAAM,KAAK,UAAU,EAAE,OAAO,gCAAgC,CAAC;AAAA,IACjE;AAAA,EACF;AAEA,MAAI;AAEF,UAAM,OAAoB,KAAK,MAAM,MAAM,QAAQ,IAAI;AACvD,UAAM,EAAE,UAAU,MAAM,IAAI;AAG5B,QAAI,CAAC,YAAY,CAAC,OAAO;AACvB,aAAO;AAAA,QACL,YAAY;AAAA,QACZ,MAAM,KAAK,UAAU;AAAA,UACnB,OAAO;AAAA,QACT,CAAC;AAAA,MACH;AAAA,IACF;AAGA,UAAM,YAAY,QAAQ,IAAI;AAC9B,UAAM,eAAe,QAAQ,IAAI;AACjC,UAAM,cAAc,QAAQ,IAAI;AAChC,UAAM,SAAS,QAAQ,IAAI;AAE3B,QAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,aAAa;AAC/C,aAAO;AAAA,QACL,YAAY;AAAA,QACZ,MAAM,KAAK,UAAU;AAAA,UACnB,OAAO;AAAA,QACT,CAAC;AAAA,MACH;AAAA,IACF;AAIA,UAAM,SAAS,MAAM;AAAA,MACnB,EAAE,WAAW,cAAc,aAAa,OAAO;AAAA,MAC/C;AAAA,MACA;AAAA,IACF;AAEA,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,MAC9C,MAAM,KAAK,UAAU;AAAA,QACnB,SAAS;AAAA,QACT,UAAU;AAAA,QACV,SAAS,OAAO;AAAA,QAChB,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF,SAAS,OAAY;AACnB,YAAQ,MAAM,yBAAyB,KAAK;AAG5C,QAAI,MAAM,QAAQ,SAAS,iBAAiB,GAAG;AAC7C,aAAO;AAAA,QACL,YAAY;AAAA,QACZ,MAAM,KAAK,UAAU;AAAA,UACnB,OAAO;AAAA,UACP,SAAS;AAAA,QACX,CAAC;AAAA,MACH;AAAA,IACF;AAEA,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO;AAAA,QACP,SAAS,MAAM;AAAA,MACjB,CAAC;AAAA,IACH;AAAA,EACF;AACF;",
  "names": []
}
