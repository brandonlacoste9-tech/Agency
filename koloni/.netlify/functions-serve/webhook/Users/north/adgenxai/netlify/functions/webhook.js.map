{
  "version": 3,
  "sources": ["../../../../adgenxai/netlify/functions/webhook.ts"],
  "sourceRoot": "C:/Users/north/AppData/Local/Temp/tmp-28196-X7lC3iv6BiJb",
  "sourcesContent": ["// netlify/functions/webhook.ts - Main webhook routing to your AI Sensory Cortex on Netlify\nimport { Handler } from '@netlify/functions';\n\ninterface RequestData {\n  type?: string;\n  payload?: Record<string, any>;\n  hero_variant?: string;\n  timestamp?: string;\n  [key: string]: any;\n}\n\ninterface CortexResponse {\n  status?: string;\n  processing_id?: string;\n  message?: string;\n  hero_variant?: string;\n  timestamp?: string;\n  [key: string]: any;\n}\n\nexport const handler: Handler = async (event, context) => {\n  const headers = {\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Headers': 'Content-Type',\n    'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n    'Content-Type': 'application/json',\n  };\n\n  if (event.httpMethod === 'OPTIONS') {\n    return { statusCode: 200, headers, body: '' };\n  }\n\n  if (event.httpMethod !== 'POST') {\n    return {\n      statusCode: 405,\n      headers,\n      body: JSON.stringify({ error: 'POST method required' }),\n    };\n  }\n\n  try {\n    const requestData: RequestData = event.body ? JSON.parse(event.body) : {};\n    const { type, payload = {}, hero_variant, timestamp } = requestData;\n    const processingId = `adgenxai_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n\n    // Route to your AI Sensory Cortex (also on Netlify)\n    const cortexUrl = process.env.NEXT_PUBLIC_SENSORY_CORTEX_URL || process.env.SENSORY_CORTEX_URL;\n    let cortexResponse: CortexResponse = {\n      status: 'legendary_success',\n      processing_id: processingId,\n      message: 'AI Sensory Cortex processing at legendary speed',\n      hero_variant,\n      timestamp: new Date().toISOString()\n    };\n\n    if (cortexUrl) {\n      try {\n        const endpoint = type === 'legendary_ad_generation' ? '/api/generate-ads' : \n                        type === 'enterprise_demo_request' ? '/api/enterprise-demo' :\n                        '/api/process-generation';\n\n        const response = await fetch(`${cortexUrl}${endpoint}`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'X-AdGenXAI-Platform': 'netlify-web',\n            'X-Processing-ID': processingId\n          },\n          body: JSON.stringify({\n            processing_id: processingId,\n            type,\n            hero_variant,\n            timestamp,\n            ...payload\n          })\n        });\n\n        if (response.ok) {\n          const cortexData = (await response.json()) as CortexResponse;\n          cortexResponse = { ...cortexResponse, ...cortexData };\n          console.log('\uD83E\uDDE0 AI Sensory Cortex Response:', cortexData);\n        }\n      } catch (error) {\n        console.log('\uD83D\uDD25 AI Sensory Cortex operating independently:', error);\n      }\n    }\n\n    return {\n      statusCode: 200,\n      headers,\n      body: JSON.stringify({\n        success: true,\n        message: `\uD83C\uDF89 LEGENDARY! Your AI Sensory Cortex ${type || 'request'} completed successfully!`,\n        processing_id: processingId,\n        cortex_response: cortexResponse,\n        timestamp: new Date().toISOString()\n      }),\n    };\n\n  } catch (error) {\n    console.error('Webhook error:', error);\n    return {\n      statusCode: 500,\n      headers,\n      body: JSON.stringify({\n        success: false,\n        message: '\uD83D\uDD25 AI Sensory Cortex operating at maximum capacity. Please try again in a moment.',\n        timestamp: new Date().toISOString()\n      }),\n    };\n  }\n};"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBO,IAAM,UAAmB,OAAO,OAAO,YAAY;AACxD,QAAM,UAAU;AAAA,IACd,+BAA+B;AAAA,IAC/B,gCAAgC;AAAA,IAChC,gCAAgC;AAAA,IAChC,gBAAgB;AAAA,EAClB;AAEA,MAAI,MAAM,eAAe,WAAW;AAClC,WAAO,EAAE,YAAY,KAAK,SAAS,MAAM,GAAG;AAAA,EAC9C;AAEA,MAAI,MAAM,eAAe,QAAQ;AAC/B,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,UAAU,EAAE,OAAO,uBAAuB,CAAC;AAAA,IACxD;AAAA,EACF;AAEA,MAAI;AACF,UAAM,cAA2B,MAAM,OAAO,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC;AACxE,UAAM,EAAE,MAAM,UAAU,CAAC,GAAG,cAAc,UAAU,IAAI;AACxD,UAAM,eAAe,YAAY,KAAK,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,OAAO,GAAG,CAAC,CAAC;AAGtF,UAAM,YAAY,QAAQ,IAAI,kCAAkC,QAAQ,IAAI;AAC5E,QAAI,iBAAiC;AAAA,MACnC,QAAQ;AAAA,MACR,eAAe;AAAA,MACf,SAAS;AAAA,MACT;AAAA,MACA,YAAW,oBAAI,KAAK,GAAE,YAAY;AAAA,IACpC;AAEA,QAAI,WAAW;AACb,UAAI;AACF,cAAM,WAAW,SAAS,4BAA4B,sBACtC,SAAS,4BAA4B,yBACrC;AAEhB,cAAM,WAAW,MAAM,MAAM,GAAG,SAAS,GAAG,QAAQ,IAAI;AAAA,UACtD,QAAQ;AAAA,UACR,SAAS;AAAA,YACP,gBAAgB;AAAA,YAChB,uBAAuB;AAAA,YACvB,mBAAmB;AAAA,UACrB;AAAA,UACA,MAAM,KAAK,UAAU;AAAA,YACnB,eAAe;AAAA,YACf;AAAA,YACA;AAAA,YACA;AAAA,YACA,GAAG;AAAA,UACL,CAAC;AAAA,QACH,CAAC;AAED,YAAI,SAAS,IAAI;AACf,gBAAM,aAAc,MAAM,SAAS,KAAK;AACxC,2BAAiB,EAAE,GAAG,gBAAgB,GAAG,WAAW;AACpD,kBAAQ,IAAI,yCAAkC,UAAU;AAAA,QAC1D;AAAA,MACF,SAAS,OAAO;AACd,gBAAQ,IAAI,wDAAiD,KAAK;AAAA,MACpE;AAAA,IACF;AAEA,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,SAAS;AAAA,QACT,SAAS,+CAAwC,QAAQ,SAAS;AAAA,QAClE,eAAe;AAAA,QACf,iBAAiB;AAAA,QACjB,YAAW,oBAAI,KAAK,GAAE,YAAY;AAAA,MACpC,CAAC;AAAA,IACH;AAAA,EAEF,SAAS,OAAO;AACd,YAAQ,MAAM,kBAAkB,KAAK;AACrC,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,SAAS;AAAA,QACT,SAAS;AAAA,QACT,YAAW,oBAAI,KAAK,GAAE,YAAY;AAAA,MACpC,CAAC;AAAA,IACH;AAAA,EACF;AACF;",
  "names": []
}
